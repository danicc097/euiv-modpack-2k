#Anglo-Saxon (Englacynn) Missions
#By Isildur

vn_ase_missions_slot_1_a = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_defeat_vikings = {
        icon = mission_longships
        position = 2
        required_missions = { vn_ase_elect_new_king }
        provinces_to_highlight = {
            is_capital_of = NOR
        }
        trigger = {
			is_subject = no
            OR = {
				AND = {
					is_in_war = {
						attacker_leader = NOR
						defender_leader = ROOT
					}
                    war_score_against = {
						who = NOR
						value = 25
					}
				}
                custom_trigger_tooltip = {
                    tooltip = vn_ase_defeat_vikings.tt
                    has_country_flag = nor_renounced_claims_on_ase
                }
				AND = {
                    is_year = 1075
                    OR = {
                        has_won_war_against = {
                            who = NOR
                        }
                        is_at_war = no
                    }
				}
			}
        }
        effect = {
			complex_dynamic_effect = {
				first_custom_tooltip = vn_ase_defeat_vikings.tt2
				first_limit = "
                    is_in_war = {
                        attacker_leader = NOR
                        defender_leader = ROOT
                    }
                    war_score_against = {
                        who = NOR
                        value = 25
                    }
				"
				first_effect = "
                    add_war_exhaustion = -2
                    add_yearly_manpower = 1
                    add_country_modifier = {
                        name = ase_defeat_vikings_mission
                        duration = 5475
                    }
				"
				second_custom_tooltip = vn_ase_defeat_vikings.tt3
				second_limit = "
                    has_country_flag = nor_renounced_claims_on_ase
				"
				second_effect = "
                    add_legitimacy_equivalent = {
                        amount = 10
                        republican_tradition = 5
                    }
                    add_stability_or_adm_power = yes
				"
                third_custom_tooltip = vn_ase_defeat_vikings.tt4
                third_limit = "
                    is_year = 1075
                    OR = {
                        has_won_war_against = {
                            who = NOR
                        }
                        is_at_war = no
                    }
                "
                third_effect = "
                    add_adm_power = 50
                    add_dip_power = 50
                    add_mil_power = 50
                
                "
			}
            if = {
                limit = {
                    exists = NOL
                    NOL = { is_subject = no }
                }
                add_casus_belli = {
					target = NOL
					type = cb_vassalize_mission
					months = 300
				}	
            }
            else = {
                east_riding_area = {
                    limit = {
                        NOT = { is_core = ROOT }
                        NOT = { is_permanent_claim = ROOT }
                    }
                    add_permanent_claim = ROOT
                }
                west_riding_area = {
                    limit = {
                        NOT = { is_core = ROOT }
                        NOT = { is_permanent_claim = ROOT }
                    }
                    add_permanent_claim = ROOT
                }
                northumberland_area = {
                    limit = {
                        NOT = { is_core = ROOT }
                        NOT = { is_permanent_claim = ROOT }
                    }
                    add_permanent_claim = ROOT
                }
            }
        }
        ai_weight = {
            factor = 500
        }
    }
    vn_ase_reincorporate_northumbria = {
        icon = mission_rb_into_england
        position = 4
        required_missions = { vn_ase_defeat_vikings }
        provinces_to_highlight = {
            OR = {
                area = east_riding_area
                area = west_riding_area
                area = northumberland_area
            }
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
        }
        trigger = {
            NOT = { exists = NOL }
            east_riding_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT
            }
            west_riding_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT
            }
            northumberland_area = {
                type = all
                owned_by = ROOT
                is_core = ROOT
            }
        }
        effect = {
            add_adm_power = 50
            east_riding_area = {
                limit = { owned_by = ROOT }
                add_province_modifier = {
                    name = "ase_reincorporate_northumbria_mission"
                    duration = 9125
                }
            }
            west_riding_area = {
                limit = { owned_by = ROOT }
                add_province_modifier = {
                    name = "ase_reincorporate_northumbria_mission"
                    duration = 9125
                }
            }
            northumberland_area = {
                limit = { owned_by = ROOT }
                add_province_modifier = {
                    name = "ase_reincorporate_northumbria_mission"
                    duration = 9125
                }
            }
        }
        ai_weight = {
            factor = 500
        }
    }
    vn_ase_assimilate_danes = {
        icon = mission_danish_england
        required_missions = { vn_ase_reincorporate_northumbria }
        provinces_to_highlight = {
            region = northumbria_region
            OR = {
                NOT = { owned_by = ROOT }
                unrest = 1
				nationalism = 1
				local_autonomy = 1
            }
        }
        trigger = {
            northumbria_region = {
                type = all
                owned_by = ROOT
				NOT = { unrest = 1 }
				NOT = { nationalism = 1 }
				NOT = { local_autonomy = 1 }
            }
        }
        effect = {
            add_dip_power = 50
            add_country_modifier = {
                name = "ase_assimilate_danes_mission"
                duration = -1
            }
        }
    }
}

vn_ase_missions_slot_1_b = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_conquer_strathclyde = {
        icon = mission_rb_into_ireland
        position = 6
        required_missions = { vn_ase_build_up_fyrd }
        provinces_to_highlight = {
            OR = {
                area = galloway_area
                area = ayrshire_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            galloway_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            ayrshire_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            caithness_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            hebrides_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            morvern_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            add_country_modifier = {
				name = "ase_conquer_strathclyde_mission"
				duration = 9125
			}
        }
    }
}

vn_ase_missions_slot_1_c = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_conquer_highlands = {
        icon = mission_rb_conquer_the_highlands
        position = 9
        required_missions = { vn_ase_conquer_strathclyde }
        provinces_to_highlight = {
            OR = {
                area = caithness_area
                area = hebrides_area
                area = morvern_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            caithness_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            hebrides_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            morvern_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            if = {
				limit = { has_dlc = "Rights of Man" }
				add_ruler_personality = hammer_of_the_scots_personality
			}
            if = {
                limit = { has_dlc = "Domination" }
                custom_tooltip = vn_ase_conquer_highlands.tt
                hidden_effect = {
                    capital_scope = {
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                        samurai_infantry = ROOT
                    }
                }
                add_country_modifier = {
                    name = "ase_conquer_highlands_mission2"
                    duration = 9125
                }
            }
            else = {
                add_yearly_manpower = 2
                add_country_modifier = {
                    name = "ase_conquer_highlands_mission"
                    duration = 9125
                }
            }
        }
    }
}

vn_ase_missions_slot_2_a = {
    slot = 7
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_elect_new_king = {
        icon = mission_the_renaissance_king
        position = 1
        required_missions = { }
        completed_by = 1066.1.5
        trigger = {
            custom_trigger_tooltip = {
                tooltip = vn_ase_elect_new_king.tt
                NOT = { has_ruler_flag = edward_the_confessor_flag }
            }
            OR = {
                custom_trigger_tooltip = {
                    tooltip = vn_ase_elect_new_king.tt6
                    OR = {
                        has_country_flag = edward_sucession_godwin
                        has_country_flag = edward_sucession_edgar
                        has_country_flag = edward_sucession_NRM
                        has_country_flag = edward_sucession_NOR
                    }
                }
                NOT = { current_age = age_of_empire }
            }
        }
        effect = {
			complex_dynamic_effect = {
				first_custom_tooltip = vn_ase_elect_new_king.tt2
				first_limit = "
                    has_country_flag = edward_sucession_godwin
				"
				first_effect = "
                    add_country_modifier = {
                        name = ase_elect_new_king_mission
                        duration = 9125
                    }
				"
				second_custom_tooltip = vn_ase_elect_new_king.tt3
				second_limit = "
                    has_country_flag = edward_sucession_edgar
				"
				second_effect = "
                    add_country_modifier = {
                        name = ase_elect_new_king_mission2
                        duration = 9125
                    }
				"
                third_custom_tooltip = vn_ase_elect_new_king.tt4
				third_limit = "
                    has_country_flag = edward_sucession_NRM
				"
				third_effect = "
                    add_country_modifier = {
                        name = ase_elect_new_king_mission3
                        duration = 9125
                    }
				"
                fourth_custom_tooltip = vn_ase_elect_new_king.tt5
				fourth_limit = "
                    has_country_flag = edward_sucession_NOR
				"
				fourth_effect = "
                    add_country_modifier = {
                        name = ase_elect_new_king_mission4
                        duration = 9125
                    }
				"
			}
        }
        ai_weight = {
            factor = 500
        }
    }
}

vn_ase_missions_slot_2_b = {
    slot = 7
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_a_kingdom_consolidated = {
        icon = mission_crown_of_wenceslas
        position = 3
        required_missions = { 
            vn_ase_defeat_vikings
            vn_ase_drive_out_normans
        }
        trigger = {
			stability = 2
			army_size_percentage = 0.75
            manpower_percentage = 0.75
            is_at_war = no
            is_subject = no
            if = {
                limit = { has_dlc = "Common Sense" }
                legitimacy_equivalent = 100
            }
            else_if = {
                limit = { government = monarchy }
                legitimacy = 100
            }
        }
        effect = {
            add_power_projection = {
				type = mission_rewards_power_projection
				amount = 25
			}
            add_country_modifier = {
                name = ase_a_kingdom_consolidated_mission
                duration = 9125
            }
        }
        ai_weight = {
            factor = 500
        }
    }
    vn_ase_flourishing_witan = {
        icon = mission_noble_council
        position = 3
        required_missions = { vn_ase_a_kingdom_consolidated }
        trigger = {
            has_3_lv3_advisors_trigger = yes
            is_in_deficit = no
            NOT = { corruption = 1 }
        }
        effect = {
            change_government_reform_progress = 50
            unlock_government_reform = {
				government_reform = expanded_witenagemot_reform
			}
            if = {
                limit = { has_dlc = "Domination" }
                unlock_issue = {
                    issue = discipline_for_the_marines_acts
                }
                unlock_issue = {
                    issue = improved_man_of_war_acts
                }
                unlock_issue = {
                    issue = army_reform_acts
                }
            }
        }
        ai_weight = {
			factor = 500
		}
    }
}

vn_ase_missions_slot_2_c = {
    slot = 7
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_build_up_fyrd = {
        icon = mission_large_army
        position = 5
        required_missions = { 
            vn_ase_reincorporate_northumbria
            vn_ase_end_isolation
        }
        trigger = {
            if = {
                limit = { has_dlc = "Domination" }
                OR = {
                    has_reform = wei_suo_system_reform
                    num_of_owned_provinces_with = {
                        base_manpower = 6
                        has_manpower_building_trigger = yes
                        value = 10
                    }
                }
            }
            else = {
                num_of_owned_provinces_with = {
                    base_manpower = 6
                    has_manpower_building_trigger = yes
                    value = 10
                }
            }
            num_of_generals = 2
            num_of_infantry = 15
            army_tradition = 40
        }
        effect = {
            add_army_tradition = 10
            galloway_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            ayrshire_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            edinburgh_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            add_country_modifier = {
                name = ase_build_up_fyrd_mission
                duration = 9125
            }
        }
    }
    vn_ase_reclaim_lothian = {
        icon = mission_expand_into_the_forest
        required_missions = { vn_ase_build_up_fyrd }
        provinces_to_highlight = {
            area = edinburgh_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            2621 = { country_or_non_sovereign_subject_holds = ROOT }
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 5
                area = edinburgh_area
            }
        }
        effect = {
            add_prestige_or_monarch_power = { amount = 10 }
            fife_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            angus_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            2621 = {
                add_local_autonomy = -50
                add_province_modifier = {
                    name = ase_reclaim_lothian_mission
                    duration = -1
                }
            }
        }
    }
    vn_ase_control_eastern_scotland = {
        icon = mission_rb_conquer_the_isles
        position = 8
        required_missions = { vn_ase_reclaim_lothian }
        provinces_to_highlight = {
            OR = {
                area = fife_area
                area = angus_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            fife_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            angus_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            country_event = {
                id = vn_flavor_ase.1
            }
        }
    }
    vn_ase_anglo_scottish_union = {
        icon = mission_rb_conquer_scotland
        position = 10
        required_missions = {
            vn_ase_control_eastern_scotland
            vn_ase_conquer_highlands
        }
        provinces_to_highlight = {
            OR = {
                region = scotland_region
                region = highlands_region
            }
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
                controlled_by = REB
            }
        }
        trigger = {
            NOT = { exists = SCO }
            NOT = { exists = HSC }
            scotland_region = {
                type = all
                owned_by = ROOT
                is_core = ROOT
                NOT = { controlled_by = REB }
                NOT = { unrest = 1 }
            }
            highlands_region = {
                type = all
                owned_by = ROOT
                is_core = ROOT
                NOT = { controlled_by = REB }
                NOT = { unrest = 1 }
            }
        }
        effect = {
            add_permanent_power_projection = {
				type = 25_permanent_power_projection
				amount = 25
			}
            add_country_modifier = {
                name = "ase_anglo_scottish_union_mission"
                duration = 18250
            }
        }
    }
}

vn_ase_missions_slot_3_a = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_drive_out_normans = {
        icon = mission_soldiers_in_line
        position = 2
        required_missions = { vn_ase_elect_new_king }
        provinces_to_highlight = {
            is_capital_of = NRM
        }
        trigger = {
			is_subject = no
			OR = {
				AND = {
					is_in_war = {
						attacker_leader = NRM
						defender_leader = ROOT
					}
                    war_score_against = {
						who = NRM
						value = 25
					}
				}
                custom_trigger_tooltip = {
                    tooltip = vn_ase_drive_out_normans.tt
                    has_country_flag = nrm_renounced_claims_on_ase
                }
				AND = {
                    is_year = 1075
                    OR = {
                        has_won_war_against = {
                            who = NRM
                        }
                        is_at_war = no
                    }
				}
			}
        }
        effect = {
            complex_dynamic_effect = {
				first_custom_tooltip = vn_ase_drive_out_normans.tt2
				first_limit = "
                    is_in_war = {
                        attacker_leader = NRM
                        defender_leader = ROOT
                    }
                    war_score_against = {
                        who = NRM
                        value = 25
                    }
				"
				first_effect = "
                    add_war_exhaustion = -2
                    add_yearly_manpower = 1
                    add_country_modifier = {
                        name = ase_drive_out_normans_mission
                        duration = 5475
                    }
				"
				second_custom_tooltip = vn_ase_drive_out_normans.tt3
				second_limit = "
                    has_country_flag = nrm_renounced_claims_on_ase
				"
				second_effect = "
                    add_legitimacy_equivalent = {
                        amount = 10
                        republican_tradition = 5
                    }
                    add_stability_or_adm_power = yes
				"
                third_custom_tooltip = vn_ase_drive_out_normans.tt4
                third_limit = "
                    is_year = 1075
                    OR = {
                        has_won_war_against = {
                            who = NRM
                        }
                        is_at_war = no
                    }
                "
                third_effect = "
                    add_adm_power = 50
                    add_dip_power = 50
                    add_mil_power = 50
                
                "
			}
            normandy_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_claim = ROOT }
                }
                add_claim = ROOT
            }
        }
        ai_weight = {
            factor = 500
        }
    }
}

vn_ase_missions_slot_3_b = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_end_isolation = {
        icon = mission_european_politics
        position = 4
        required_missions = { vn_ase_a_kingdom_consolidated }
        trigger = {
            NOT = { has_estate_privilege = estate_church_anglosaxon_isolation }
            if = {
                limit = { has_estate = estate_church }
                estate_loyalty = {
                    estate = estate_church
                    loyalty = 50
                }
                NOT = {
                    estate_influence = {
                        estate = estate_church
                        influence = 80
                    }
                }
            }
            else = {
                NOT = { has_estate = estate_church }
            }
        }
        effect = {
            change_estate_land_share = {
                estate = estate_church
                share = -5
            }
            add_country_modifier = {
                name = ase_end_isolation_mission
                duration = 9125
            }
        }
        ai_weight = {
            factor = 500
        }
    }
}

vn_ase_missions_slot_3_c = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_beyond_offas_dyke = {
        icon = mission_royal_roads
        position = 6
        required_missions = { vn_ase_build_up_fyrd }
        provinces_to_highlight = {
            OR = {
                area = walesnorth_area
                area = walessouth_area
                area = montgomery_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            calc_true_if = {
                walesnorth_area = {
                    type = all
                    country_or_non_sovereign_subject_holds = ROOT
                }
                montgomery_area = {
                    type = all
                    country_or_non_sovereign_subject_holds = ROOT
                }
                walessouth_area = {
                    type = all
                    country_or_non_sovereign_subject_holds = ROOT
                }
                amount = 2
            }
        }
        effect = {
            wales_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            add_country_modifier = {
                name = ase_beyond_offas_dyke_mission
                duration = 9125
            }
        }
    }
    vn_ase_subdue_wales = {
        icon = mission_rb_conquer_wales
        required_missions = { vn_ase_beyond_offas_dyke }
        provinces_to_highlight = {
            region = wales_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            wales_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            # if = { 
			# 	limit = {
            #         has_dlc = "Leviathan"
            #         2448 = {
			# 			NOT = { 
			# 				has_great_project = {
			# 					type = caernarfon_castle 
			# 					tier = 3 
			# 				}
			# 			}
			# 		}
            #     }
			# 	2448 = { 
            #         add_great_project_tier = {
            #             type = caernarfon_castle
            #             tier = 1 
            #         }
            #     }
			# }
            #else = {
                2448 = {
                    add_base_manpower = 3
                    add_local_autonomy = -25
                }
            #}
			wales_region = {
                limit = { country_or_non_sovereign_subject_holds = ROOT }
                add_province_modifier = {
                    name = "eng_conquer_wales_mission"
                    duration = 9125
                }
            }
        }
    }
}

vn_ase_missions_slot_3_d = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_conquer_munster = {
        icon = mission_rb_conquer_munster
        position = 9
        required_missions = { vn_ase_conquer_leinster }
        provinces_to_highlight = {
            region = mhumhain_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 10
                region = mhumhain_region
            }
        }
        effect = {
            mhumhain_region = {
                limit = { country_or_non_sovereign_subject_holds = ROOT }
                add_nationalism = -10
                add_province_modifier = {
                    name = "ase_conquer_connacht_mission"
                    duration = 9125
                }
            }
        }
    }
}

vn_ase_missions_slot_3_e = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_bretwalda = {
        icon = mission_invade_england
        position = 11
        required_missions = {
            vn_ase_anglo_scottish_union
            vn_ase_consolidate_ireland
        }
        provinces_to_highlight = {
			OR = {
				superregion = british_isles_superregion
				superregion = irish_superregion
			}
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
                consolidated_region_trigger = no
            }
        }
        trigger = {
            irish_superregion = {
                type = all
                owned_by = ROOT
                is_core = ROOT
				consolidated_region_trigger = yes
            }
            british_isles_superregion = {
                type = all
                owned_by = ROOT
                is_core = ROOT
				consolidated_region_trigger = yes
            }
            ADM = 3
            DIP = 3
			MIL = 3
			prestige = 50
			army_size_percentage = 0.6
			navy_size_percentage = 0.6
            if = {
                limit = { has_dlc = "Common Sense" }
                legitimacy_equivalent = 95
            }
            else_if = {
                limit = { government = monarchy }
                legitimacy = 95
            }
        }
        effect = {
            if = {
                limit = {
                    NOT = { government_rank = 6 }
                }
                set_government_rank = 6
            }
            add_adm_power = 100
            add_dip_power = 100
            add_mil_power = 100
            add_prestige_or_monarch_power = { amount = 25 } 
            add_legitimacy = 20
            add_country_modifier = {
                name = "ase_bretwalda_mission"
                duration = -1
            }
            set_country_flag = bretwalda_flag
        }
    }
}

vn_ase_missions_slot_4_a = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_reform_economy = {
        icon = mission_african_gold
        position = 1
        required_missions = { }
        trigger = {
            share_of_starting_income = 1.5
            NOT = { num_of_loans = 1 }
            is_in_deficit = no
            treasury = 500
        }
        effect = {
            add_inflation = -2
            add_years_of_income = 0.5
            add_country_modifier = {
                name = "ase_reform_economy_mission"
                duration = 9125
            }
        }
    }
    vn_ase_dominate_wool_trade = {
        icon = ned_cloth_trading
        required_missions = { vn_ase_reform_economy }
        provinces_to_highlight = {
            owned_by = ROOT
            trade_goods = wool
        }
        trigger = {
            wool = 3
            OR = {
                production_leader = {
                    trade_goods = wool
                }
                trading_bonus = {
                    trade_goods = wool
                    value = yes
                }
            }
        }
        effect = {
            add_mercantilism = 2
            change_price = {
				trade_goods = wool
				key = english_wool
				value = 0.5
				duration = 18250
			}
            random_owned_province = {
                limit = { trade_goods = wool }
                add_province_modifier = {
                    name = "ase_dominate_wool_trade_mission"
                    duration = -1
                }
            }
        }
    }
}

vn_ase_missions_slot_4_b = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_revenge_on_normandy = {
        icon = mission_northumberland_coast
        position = 3
        required_missions = { vn_ase_drive_out_normans }
        provinces_to_highlight = {
            is_capital_of = NRM
        }
        trigger = {
            is_subject = no
            if = {
				limit = { exists = NRM }
				has_won_war_against = {
                    who = NRM
                    max_years_since = 50
                }
                army_size = NRM
                manpower_percentage = 0.75
			}
			else = {
				NOT = { exists = NRM }
			}
        }
        effect = {
            change_ruler_stat = {
				type = mil
				amount = 1
			}
			add_army_professionalism = 0.05
			add_army_tradition = 10
        }
    }
    vn_ase_continental_foothold = {
        icon = mission_rb_conquer_brittany
        required_missions = { vn_ase_revenge_on_normandy }
        provinces_to_highlight = {
            region = normandy_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            normandy_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            brittany_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_claim = ROOT }
                }
                add_claim = ROOT
            }
			add_country_modifier = {
				name = "ase_continental_foothold_mission"
				duration = 9125
			}
        }
    }
}

vn_ase_missions_slot_4_c = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_anglo_saxon_fleet = {
        icon = mission_rb_grow_the_channel
        position = 5
        required_missions = { vn_ase_end_isolation }
        trigger = {
            num_of_admirals = 1
            navy_size_percentage = 0.75
            num_of_heavy_ship = 5
            num_of_transport = 10
        }
        effect = {
            create_admiral = {
                tradition = 75
                add_shock = 1
            }
            ireland_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_ase_conquer_leinster = {
        icon = mission_rb_conquer_leinster
        position = 8
        required_missions = {
            vn_ase_subdue_wales
            vn_ase_anglo_saxon_fleet
        }
        provinces_to_highlight = {
            region = ireland_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 10
                region = ireland_region
            }
        }
        effect = {
            mhumhain_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            westireland_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            northern_ireland_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
			ireland_region = {
                limit = { country_or_non_sovereign_subject_holds = ROOT }
                add_nationalism = -10
                add_province_modifier = {
                    name = "ase_conquer_connacht_mission"
                    duration = 9125
                }
            }
        }
    }
    vn_ase_conquer_connacht = {
        icon = mission_rb_conquer_connacth
        required_missions = { vn_ase_conquer_leinster }
        provinces_to_highlight = {
            region = westireland_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 10
                region = westireland_region
            }
        }
        effect = {
            westireland_region = {
                limit = { country_or_non_sovereign_subject_holds = ROOT }
                add_nationalism = -10
                add_province_modifier = {
                    name = "ase_conquer_connacht_mission"
                    duration = 9125
                }
            }
        }
    }
    vn_ase_consolidate_ireland = {
        icon = mission_rb_beyond_the_pale
        required_missions = {
            vn_ase_conquer_munster
            vn_ase_conquer_connacht
            vn_ase_conquer_ulster
        }
        provinces_to_highlight = {
            superregion = irish_superregion
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
                consolidated_region_trigger = no
            }
        }
        trigger = {
            irish_superregion = {
                type = all
                owned_by = ROOT
                is_core = ROOT
                consolidated_region_trigger = yes
            }
        }
        effect = {
            irish_superregion = {
				limit = { owned_by = ROOT }
				add_province_modifier = {
					name = "ase_consolidate_ireland_mission"
					duration = 10950
				}
			}
        }
    }
}

vn_ase_missions_slot_5_a = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_westminster_abbey = {
        icon = mission_the_golden_city
        position = 1
        required_missions = { }
        completed_by = 1066.1.5
        provinces_to_highlight = {
            province_id = 2268
        }
        trigger = {
            2268 = {
                owned_by = ROOT
                base_tax = 12
            }
        }
        effect = {
            country_event = {
                id = vn_flavor_ase.2
            }
        }
        ai_weight = {
			factor = 500
		}
    }
    vn_ase_romanesque_architecture = {
        icon = dutch_architecture
        required_missions = { vn_ase_westminster_abbey }
        trigger = {
            num_of_owned_provinces_with = {
                value = 6
                has_building = armory
            }
            num_of_owned_provinces_with = {
               value = 10
               has_tax_building_trigger = yes
            }
            num_of_owned_provinces_with = {
                value = 6
                has_trade_building_trigger = yes
            }
        }
        effect = {
            add_splendor = 100
            add_prestige_or_monarch_power = {
                amount = 10
            }
            add_country_modifier = {
                name = "ase_romanesque_architecture_mission"
                duration = 9125
            }
        }
    }
    vn_ase_norman_castles = {
        icon = mission_castle_construction
        position = 4
        required_missions = {
            vn_ase_revenge_on_normandy
            vn_ase_romanesque_architecture
        }
        provinces_to_highlight = {
            owned_by = ROOT
            has_building = fort_14th
            NOT = { has_building = fort_15th }
            NOT = { has_building = fort_16th }
            NOT = { has_building = fort_17th }
            NOT = { has_building = fort_18th }
        }
        trigger = {
            num_of_owned_provinces_with = {
                value = 6
                has_fort_15th_trigger = yes
            }
        }
        effect = {
            define_advisor = {
                type = fortification_expert
                skill = 3
                cost_multiplier = 0.25
                culture = normand
            }
            add_country_modifier = {
                name = "ase_norman_castles_mission"
                duration = 9125
            }
        }
    }
}

vn_ase_missions_slot_5_b = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_scandinavian_diplomacy = {
        icon = mission_danish_kingdom
        position = 5
        required_missions = { vn_ase_end_isolation }
        provinces_to_highlight = {
            superregion = scandinavia_superregion
            is_capital = yes
            NOT = { owned_by = ROOT }
            owner = {
                NOT = {
                    has_opinion = {
                        who = ROOT
                        value = 100
                    }
                }
            }
        }
        trigger = {
            if = {
                limit = {
                    any_country = {
                        NOT = { tag = ROOT }
                        capital_scope = {
                            superregion = scandinavia_superregion
                        }
                    }
                }
                any_country = {
                    custom_trigger_tooltip = {
                        tooltip = vn_ase_scandinavian_diplomacy.tt
                        capital_scope = {
                            superregion = scandinavia_superregion
                        }
                    }
                    has_opinion = {
                        who = ROOT
                        value = 100
                    }
                }
            }
            else = {
                scandinavia_superregion = {
                    owned_by = ROOT
                }
            }
        }
        effect = {
            custom_tooltip = vn_ase_scandinavian_diplomacy.tt2
            hidden_effect = {
                every_known_country = {
                    limit = {
                        capital_scope = {
                            superregion = scandinavia_superregion
                        }
                        is_free_or_tributary_trigger = yes
                        has_opinion = {
                            who = ROOT
                            value = 100
                        }
                    }
                    add_opinion = {
                        who = ROOT
                        modifier = ase_scandinavian_diplomacy_opinion
                        years = 25
                    }
                }
            }
            add_country_modifier = {
                name = "ase_scandinavian_diplomacy_mission"
                duration = 9125
            }
        }
    }
    vn_ase_open_doors_to_trade = {
        icon = mission_control_the_channel
        required_missions = {
            vn_ase_anglo_saxon_fleet
            vn_ase_scandinavian_diplomacy
        }
        trigger = {
            num_of_centers_of_trade = 5
            if = {
                limit = { has_dlc = "Dharma" }
                any_owned_province = {
                    province_has_center_of_trade_of_level = 3
                }
            }
            trade_income_percentage = 0.3
            num_of_merchants = 4
        }
        effect = {
            add_estate_burghers_loyalty_effect = yes
            add_country_modifier = {
                name = "ase_open_doors_to_trade_mission"
                duration = 9125
            }
        }
    }
    vn_ase_growth_of_burhs = {
        icon = mission_big_city
        required_missions = { vn_ase_open_doors_to_trade }
        trigger = {
			num_of_owned_provinces_with = {
				value = 10
				development = 10
                has_production_building_trigger = yes
			}
			num_of_owned_provinces_with = {
				value = 5
				development = 15
                has_production_building_trigger = yes
			}
        }
        effect = {
            if = { 
				limit = { 
					has_dlc = "Rights of Man" 
					NOT = { num_of_ruler_traits = { amount = 3 } }
				} 
				add_ruler_personality = industrious_personality
			}
            else = { 
				change_ruler_stat = {
					type = adm
					amount = 1
				}
			}
            distribute_development = {
                type = production
                amount = 10
                limit = "
                    development = 10
                    has_production_building_trigger = yes
				"
                tooltip = OMA_DISTRIBUTE_ONLY_IN_REQUIRED_PROVINCES
            }
        }
    }
    vn_ase_northern_connections = {
        icon = mission_rb_control_the_hansa
        required_missions = { vn_ase_growth_of_burhs }
        provinces_to_highlight = {
            OR = {
                province_id = 13
                province_id = 1084
                province_id = 258
                province_id = 2268
                province_id = 1132
                province_id = 2621
            }
            NOT = { is_strongest_trade_power = ROOT }
        }
        trigger = {
			13 = {
                is_strongest_trade_power = ROOT
            }
            1084 = {
				is_strongest_trade_power = ROOT
            }
            258 = {
                is_strongest_trade_power = ROOT
            }
            2268 = {
                is_strongest_trade_power = ROOT
			}
			1132 = {
				is_strongest_trade_power = ROOT
			}
			2621 = {
				is_strongest_trade_power = ROOT
			}
        }
        effect = {
            add_years_of_trade_income = {
				years = 4
				custom_tooltip = zan_settle_trade_posts_ct
			}
            add_country_modifier = {
				name = "ase_northern_connections_mission"
				duration = -1
			}
        }
    }
}

vn_ase_missions_slot_5_c = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        OR = {
            tag = ASE
            AND = {
                tag = GBR
                was_tag = ASE
            }
        }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_ase_conquer_ulster = {
        icon = mission_rb_conquer_ulster
        position = 9
        required_missions = { vn_ase_conquer_leinster }
        provinces_to_highlight = {
            region = northern_ireland_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 10
                region = northern_ireland_region
            }
        }
        effect = {
            northern_ireland_region = {
                limit = { country_or_non_sovereign_subject_holds = ROOT }
                add_nationalism = -10
                add_province_modifier = {
                    name = "ase_conquer_connacht_mission"
                    duration = 9125
                }
            }
        }  
    }
}